<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coin Master 💰 - Earn Money</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary: #ff6b00;
            --secondary: #ff9e00;
            --accent: #ffd500;
            --dark: #1a1a2e;
            --darker: #0d0d1a;
            --light: #f0f0f0;
            --success: #28a745;
        }
        
        body {
            background: linear-gradient(135deg, var(--darker), var(--dark));
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        
        body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 10% 20%, rgba(255, 107, 0, 0.1) 0%, rgba(255, 158, 0, 0.05) 30%, transparent 70%);
            z-index: -1;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* Header Styles */
        .app-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }
        
        .app-title {
            font-size: 24px;
            font-weight: 700;
            background: linear-gradient(to right, var(--accent), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .wallet-box {
            background: linear-gradient(135deg, rgba(40, 167, 69, 0.2), rgba(33, 150, 83, 0.3));
            border-radius: 15px;
            padding: 10px 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .wallet-box i {
            color: var(--accent);
            font-size: 20px;
        }
        
        .coins {
            font-weight: 700;
            font-size: 18px;
            color: var(--accent);
        }
        
        .profile-btn {
            background: rgba(255, 255, 255, 0.1);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .profile-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .card {
            background: rgba(30, 30, 50, 0.7);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .card-header i {
            font-size: 24px;
            color: var(--secondary);
        }
        
        .card-title {
            font-size: 20px;
            font-weight: 600;
        }
        
        .task-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }
        
        .task-card {
            background: linear-gradient(135deg, rgba(255, 107, 0, 0.15), rgba(255, 158, 0, 0.1));
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .task-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            background: linear-gradient(135deg, rgba(255, 107, 0, 0.25), rgba(255, 158, 0, 0.2));
        }
        
        .task-icon {
            font-size: 40px;
            margin-bottom: 10px;
            color: var(--accent);
        }
        
        .task-name {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .task-desc {
            font-size: 12px;
            opacity: 0.8;
        }
        
        .spins-left {
            background: rgba(255, 255, 255, 0.1);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            margin-top: 8px;
            display: inline-block;
        }
        
        /* Spinner Styles */
        .spinner-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 10, 20, 0.95);
            z-index: 100;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        
        .wheel-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 0 auto 30px;
        }
        
        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            border: 8px solid var(--dark);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            transition: transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99);
            background: var(--darker);
        }
        
        .wheel-item {
            position: absolute;
            width: 50%;
            height: 50%;
            transform-origin: bottom right;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 20px;
            color: var(--light);
        }
        
        .spin-button {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 12px 40px;
            font-size: 18px;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(255, 107, 0, 0.4);
            transition: all 0.3s ease;
        }
        
        .spin-button:disabled {
            background: #555;
            cursor: not-allowed;
            opacity: 0.7;
        }
        
        .spin-button:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 7px 20px rgba(255, 107, 0, 0.6);
        }
        
        .pointer {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 40px;
            background: var(--accent);
            clip-path: polygon(50% 100%, 0 0, 100% 0);
            z-index: 10;
        }
        
        /* Tap to Earn */
        .tap-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 10, 20, 0.95);
            z-index: 100;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        
        .tap-button {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(255, 107, 0, 0.5);
            transition: all 0.1s ease;
            user-select: none;
        }
        
        .tap-button:active {
            transform: scale(0.95);
            box-shadow: 0 5px 15px rgba(255, 107, 0, 0.3);
        }
        
        .tap-counter {
            margin-top: 20px;
            font-size: 18px;
        }
        
        /* Profile Modal */
        .profile-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 10, 20, 0.95);
            z-index: 100;
            align-items: center;
            justify-content: center;
        }
        
        .profile-content {
            background: rgba(30, 30, 50, 0.9);
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .profile-title {
            text-align: center;
            margin-bottom: 20px;
            font-size: 24px;
            color: var(--accent);
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            opacity: 0.8;
        }
        
        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border-radius: 10px;
            background: rgba(20, 20, 35, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 16px;
        }
        
        .save-btn {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            border: none;
            width: 100%;
            padding: 15px;
            font-size: 18px;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        /* Withdraw Modal */
        .withdraw-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 10, 20, 0.95);
            z-index: 100;
            align-items: center;
            justify-content: center;
        }
        
        .withdraw-content {
            background: rgba(30, 30, 50, 0.9);
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .withdraw-title {
            text-align: center;
            margin-bottom: 20px;
            font-size: 24px;
            color: var(--accent);
        }
        
        .conversion {
            text-align: center;
            margin: 15px 0;
            font-size: 18px;
        }
        
        .conversion span {
            color: var(--accent);
            font-weight: bold;
        }
        
        .withdraw-btn {
            background: linear-gradient(to right, var(--success), #1d9239);
            color: white;
            border: none;
            width: 100%;
            padding: 15px;
            font-size: 18px;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 20px;
        }
        
        .withdraw-btn:disabled {
            background: #555;
            cursor: not-allowed;
        }
        
        /* Result Modal */
        .result-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 10, 20, 0.95);
            z-index: 100;
            align-items: center;
            justify-content: center;
        }
        
        .result-content {
            background: rgba(30, 30, 50, 0.9);
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .result-icon {
            font-size: 60px;
            color: var(--accent);
            margin-bottom: 20px;
        }
        
        .result-text {
            font-size: 24px;
            margin-bottom: 20px;
        }
        
        .earned-coins {
            font-size: 28px;
            color: var(--accent);
            font-weight: bold;
            margin: 10px 0;
        }
        
        .close-btn {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 16px;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 20px;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 20px 0;
            font-size: 14px;
            opacity: 0.7;
            margin-top: auto;
        }
        
        /* Login Page */
        .login-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            background: linear-gradient(135deg, var(--darker), var(--dark));
        }
        
        .login-box {
            background: rgba(30, 30, 50, 0.9);
            border-radius: 20px;
            padding: 30px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .login-title {
            text-align: center;
            font-size: 28px;
            margin-bottom: 30px;
            color: var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .login-btn {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            border: none;
            width: 100%;
            padding: 15px;
            font-size: 18px;
            font-weight: 600;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(255, 107, 0, 0.4);
        }
        
        /* Animations */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes coinAnimation {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-50px) scale(0.5); opacity: 0; }
        }
        
        .coin-animation {
            position: absolute;
            color: var(--accent);
            font-weight: bold;
            animation: coinAnimation 1s forwards;
            pointer-events: none;
            z-index: 200;
        }
        
        /* Responsive */
        @media (max-width: 480px) {
            .wheel-container {
                width: 280px;
                height: 280px;
            }
            
            .task-grid {
                grid-template-columns: 1fr;
            }
            
            .card {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div class="login-container" id="loginPage">
        <div class="login-box">
            <h1 class="login-title"><i class="fas fa-coins"></i> Coin Master 💰</h1>
            <div class="input-group">
                <label for="userName">Your Name</label>
                <input type="text" id="userName" placeholder="Enter your name">
            </div>
            <div class="input-group">
                <label for="userUPI">Your UPI ID</label>
                <input type="text" id="userUPI" placeholder="Enter your UPI ID">
            </div>
            <button class="login-btn" id="loginBtn">START EARNING</button>
        </div>
        <div class="footer">
            Made with ❤️ by bulbul
        </div>
    </div>
    
    <!-- Main App (Initially hidden) -->
    <div class="container" id="appPage" style="display:none;">
        <div class="app-header">
            <div class="profile-btn" id="profileBtn">
                <i class="fas fa-user"></i>
            </div>
            <h1 class="app-title"><i class="fas fa-coins"></i> Coin Master</h1>
            <div class="wallet-box" id="walletBtn">
                <i class="fas fa-wallet"></i>
                <span>Coins: <span class="coins" id="coinsCount">0</span></span>
            </div>
        </div>
        
        <div class="main-content">
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-tasks"></i>
                    <h2 class="card-title">Daily Tasks</h2>
                </div>
                <p>Complete tasks to earn coins. Withdraw coins when you reach 100 coins!</p>
                
                <div class="task-grid">
                    <div class="task-card" id="spinTask">
                        <div class="task-icon">
                            <i class="fas fa-sync-alt"></i>
                        </div>
                        <h3 class="task-name">Spin & Earn</h3>
                        <p class="task-desc">Spin the wheel to win coins</p>
                        <div class="spins-left" id="spinsLeft">10 spins left today</div>
                    </div>
                    
                    <div class="task-card" id="tapTask">
                        <div class="task-icon">
                            <i class="fas fa-fingerprint"></i>
                        </div>
                        <h3 class="task-name">Tap Tap Earn</h3>
                        <p class="task-desc">Tap to earn coins</p>
                        <div class="spins-left">2 Taps = 1 Coin</div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-gift"></i>
                    <h2 class="card-title">Daily Bonus</h2>
                </div>
                <p>Come back daily to get bonus rewards!</p>
                <div class="task-card pulse" style="margin-top:15px; background:rgba(255, 213, 0, 0.15);">
                    <div class="task-icon">
                        <i class="fas fa-calendar-day"></i>
                    </div>
                    <h3 class="task-name">Daily Reward</h3>
                    <p class="task-desc">Claim your daily bonus</p>
                    <div class="spins-left">5 coins</div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            Made with ❤️ by bulbul
        </div>
    </div>
    
    <!-- Spinner Modal -->
    <div class="spinner-container" id="spinnerModal">
        <div class="wheel-container">
            <div class="pointer"></div>
            <div class="wheel" id="wheel">
                <!-- Wheel segments will be generated by JS -->
            </div>
        </div>
        <button class="spin-button" id="spinBtn">SPIN TO EARN (FREE)</button>
    </div>
    
    <!-- Tap to Earn Modal -->
    <div class="tap-container" id="tapModal">
        <div class="tap-button" id="tapBtn">
            TAP ME!
        </div>
        <div class="tap-counter" id="tapCounter">
            Taps: 0 | Coins earned: 0
        </div>
    </div>
    
    <!-- Profile Modal -->
    <div class="profile-modal" id="profileModal">
        <div class="profile-content">
            <h2 class="profile-title"><i class="fas fa-user-circle"></i> Your Profile</h2>
            <div class="input-group">
                <label for="profileName">Your Name</label>
                <input type="text" id="profileName" placeholder="Enter your name">
            </div>
            <div class="input-group">
                <label for="profileUPI">Your UPI ID</label>
                <input type="text" id="profileUPI" placeholder="Enter your UPI ID">
            </div>
            <button class="save-btn" id="saveProfileBtn">SAVE PROFILE</button>
        </div>
    </div>
    
    <!-- Withdraw Modal -->
    <div class="withdraw-modal" id="withdrawModal">
        <div class="withdraw-content">
            <h2 class="withdraw-title"><i class="fas fa-rupee-sign"></i> Withdraw Coins</h2>
            <div class="input-group">
                <label for="withdrawAmount">Coins to Withdraw (Min: 100)</label>
                <input type="number" id="withdrawAmount" placeholder="Enter coins" min="100">
            </div>
            <div class="conversion">
                <span id="conversionText">0 coins = ₹0.00</span>
            </div>
            <button class="withdraw-btn" id="withdrawBtn" disabled>WITHDRAW NOW</button>
        </div>
    </div>
    
    <!-- Result Modal -->
    <div class="result-modal" id="resultModal">
        <div class="result-content">
            <div class="result-icon">
                <i class="fas fa-trophy"></i>
            </div>
            <div class="result-text">Congratulations!</div>
            <div>You won</div>
            <div class="earned-coins" id="earnedCoins">+5 coins</div>
            <button class="close-btn" id="closeResultBtn">COLLECT</button>
        </div>
    </div>
    
    <!-- Ad Scripts -->
    <script type='text/javascript' src='//pl27317368.profitableratecpm.com/5c/b7/c1/5cb7c10109ab79d5118d82e0ba05b51e.js'></script>
    <script type='text/javascript' src='//pl27317378.profitableratecpm.com/04/b4/fa/04b4fa5045e109136ae9801fdb50603f.js'></script>
    <script type="text/javascript">
        atOptions = {
            'key' : 'c90270c36a62ad6ffdfdbfd1c55a73ff',
            'format' : 'iframe',
            'height' : 60,
            'width' : 468,
            'params' : {}
        };
    </script>
    <script type="text/javascript" src="//www.highperformanceformat.com/c90270c36a62ad6ffdfdbfd1c55a73ff/invoke.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const loginPage = document.getElementById('loginPage');
            const appPage = document.getElementById('appPage');
            const loginBtn = document.getElementById('loginBtn');
            const userNameInput = document.getElementById('userName');
            const userUPIInput = document.getElementById('userUPI');
            
            const profileBtn = document.getElementById('profileBtn');
            const walletBtn = document.getElementById('walletBtn');
            const coinsCount = document.getElementById('coinsCount');
            
            const spinTask = document.getElementById('spinTask');
            const tapTask = document.getElementById('tapTask');
            
            const spinnerModal = document.getElementById('spinnerModal');
            const wheel = document.getElementById('wheel');
            const spinBtn = document.getElementById('spinBtn');
            const spinsLeft = document.getElementById('spinsLeft');
            
            const tapModal = document.getElementById('tapModal');
            const tapBtn = document.getElementById('tapBtn');
            const tapCounter = document.getElementById('tapCounter');
            
            const profileModal = document.getElementById('profileModal');
            const profileName = document.getElementById('profileName');
            const profileUPI = document.getElementById('profileUPI');
            const saveProfileBtn = document.getElementById('saveProfileBtn');
            
            const withdrawModal = document.getElementById('withdrawModal');
            const withdrawAmount = document.getElementById('withdrawAmount');
            const conversionText = document.getElementById('conversionText');
            const withdrawBtn = document.getElementById('withdrawBtn');
            
            const resultModal = document.getElementById('resultModal');
            const earnedCoins = document.getElementById('earnedCoins');
            const closeResultBtn = document.getElementById('closeResultBtn');
            
            // App State
            let coins = 0;
            let spinsToday = 0;
            let lastSpinDate = null;
            let tapCount = 0;
            let coinsEarnedTapping = 0;
            let currentUser = null;
            
            // Initialize the wheel
            function initWheel() {
                const prizes = [10, 20, 50, 100, 5, 1, 8, 3];
                const prizeCount = prizes.length;
                const prizeAngle = 360 / prizeCount;
                
                wheel.innerHTML = '';
                
                prizes.forEach((prize, index) => {
                    const prizeElement = document.createElement('div');
                    prizeElement.className = 'wheel-item';
                    prizeElement.textContent = prize;
                    prizeElement.style.transform = `rotate(${index * prizeAngle}deg)`;
                    prizeElement.style.backgroundColor = index % 2 === 0 ? 'rgba(255, 107, 0, 0.4)' : 'rgba(255, 158, 0, 0.4)';
                    
                    // Position the text correctly
                    prizeElement.style.transform += ` skew(${90 - prizeAngle}deg)`;
                    
                    wheel.appendChild(prizeElement);
                });
            }
            
            // Initialize app
            function initApp() {
                // Load user data from localStorage
                const savedUser = localStorage.getItem('coinMasterUser');
                const savedCoins = localStorage.getItem('coinMasterCoins');
                const savedSpins = localStorage.getItem('coinMasterSpins');
                const savedSpinDate = localStorage.getItem('coinMasterSpinDate');
                
                if (savedUser) {
                    currentUser = JSON.parse(savedUser);
                    loginPage.style.display = 'none';
                    appPage.style.display = 'flex';
                    
                    // Load coins
                    coins = savedCoins ? parseInt(savedCoins) : 0;
                    coinsCount.textContent = coins;
                    
                    // Load spins
                    if (savedSpins && savedSpinDate) {
                        spinsToday = parseInt(savedSpins);
                        lastSpinDate = new Date(savedSpinDate);
                        
                        // Check if it's a new day
                        const today = new Date();
                        if (lastSpinDate.getDate() !== today.getDate() || 
                            lastSpinDate.getMonth() !== today.getMonth() || 
                            lastSpinDate.getFullYear() !== today.getFullYear()) {
                            spinsToday = 0;
                        }
                    }
                    
                    updateSpinsLeft();
                    initWheel();
                }
            }
            
            // Update spins left display
            function updateSpinsLeft() {
                const spinsRemaining = 10 - spinsToday;
                spinsLeft.textContent = `${spinsRemaining} spin${spinsRemaining !== 1 ? 's' : ''} left today`;
                spinBtn.disabled = spinsToday >= 10;
            }
            
            // Show coin animation
            function showCoinAnimation(amount, x, y) {
                const coin = document.createElement('div');
                coin.className = 'coin-animation';
                coin.textContent = `+${amount}`;
                coin.style.left = `${x}px`;
                coin.style.top = `${y}px`;
                document.body.appendChild(coin);
                
                setTimeout(() => {
                    document.body.removeChild(coin);
                }, 1000);
            }
            
            // Add coins
            function addCoins(amount) {
                coins += amount;
                coinsCount.textContent = coins;
                localStorage.setItem('coinMasterCoins', coins.toString());
                
                // Update wallet display
                walletBtn.classList.add('pulse');
                setTimeout(() => walletBtn.classList.remove('pulse'), 1000);
            }
            
            // Login
            loginBtn.addEventListener('click', function() {
                const name = userNameInput.value.trim();
                const upi = userUPIInput.value.trim();
                
                if (name && upi) {
                    currentUser = { name, upi };
                    localStorage.setItem('coinMasterUser', JSON.stringify(currentUser));
                    
                    // Initialize coins
                    coins = 0;
                    coinsCount.textContent = coins;
                    localStorage.setItem('coinMasterCoins', '0');
                    
                    // Initialize spins
                    spinsToday = 0;
                    lastSpinDate = null;
                    localStorage.setItem('coinMasterSpins', '0');
                    
                    loginPage.style.display = 'none';
                    appPage.style.display = 'flex';
                    
                    initWheel();
                } else {
                    alert('Please enter your name and UPI ID');
                }
            });
            
            // Profile button
            profileBtn.addEventListener('click', function() {
                if (currentUser) {
                    profileName.value = currentUser.name;
                    profileUPI.value = currentUser.upi;
                    profileModal.style.display = 'flex';
                }
            });
            
            // Save profile
            saveProfileBtn.addEventListener('click', function() {
                const name = profileName.value.trim();
                const upi = profileUPI.value.trim();
                
                if (name && upi) {
                    currentUser = { name, upi };
                    localStorage.setItem('coinMasterUser', JSON.stringify(currentUser));
                    profileModal.style.display = 'none';
                } else {
                    alert('Please enter your name and UPI ID');
                }
            });
            
            // Wallet button
            walletBtn.addEventListener('click', function() {
                if (currentUser) {
                    withdrawAmount.value = '';
                    conversionText.textContent = '0 coins = ₹0.00';
                    withdrawBtn.disabled = coins < 100;
                    withdrawModal.style.display = 'flex';
                }
            });
            
            // Withdraw amount change
            withdrawAmount.addEventListener('input', function() {
                const amount = parseInt(this.value) || 0;
                
                if (amount > coins) {
                    this.value = coins;
                    updateConversion(coins);
                } else if (amount < 100 && amount > 0) {
                    this.value = 100;
                    updateConversion(100);
                } else {
                    updateConversion(amount);
                }
            });
            
            // Update conversion
            function updateConversion(amount) {
                const rupees = amount / 100;
                conversionText.textContent = `${amount} coins = ₹${rupees.toFixed(2)}`;
                withdrawBtn.disabled = amount < 100 || amount > coins;
            }
            
            // Withdraw button
            withdrawBtn.addEventListener('click', function() {
                const amount = parseInt(withdrawAmount.value);
                
                if (amount >= 100 && amount <= coins) {
                    // Deduct coins
                    coins -= amount;
                    coinsCount.textContent = coins;
                    localStorage.setItem('coinMasterCoins', coins.toString());
                    
                    // Prepare WhatsApp message
                    const message = `New withdraw request:\n\nUser: ${currentUser.name}\nUPI: ${currentUser.upi}\n\nWithdraw Amount: ${amount} coins (₹${(amount/100).toFixed(2)})`;
                    const whatsappUrl = `https://wa.me/919864928887?text=${encodeURIComponent(message)}`;
                    
                    // Open WhatsApp
                    window.open(whatsappUrl, '_blank');
                    
                    // Close modal
                    withdrawModal.style.display = 'none';
                }
            });
            
            // Spin task
            spinTask.addEventListener('click', function() {
                spinnerModal.style.display = 'flex';
            });
            
            // Tap task
            tapTask.addEventListener('click', function() {
                tapCount = 0;
                coinsEarnedTapping = 0;
                tapCounter.textContent = 'Taps: 0 | Coins earned: 0';
                tapModal.style.display = 'flex';
            });
            
            // Spin button
            spinBtn.addEventListener('click', function() {
                if (spinsToday >= 10) return;
                
                // Disable button during spin
                spinBtn.disabled = true;
                
                // Random rotation (3-8 full rotations plus a segment)
                const prizeValues = [10, 20, 50, 100, 5, 1, 8, 3];
                const randomPrizeIndex = Math.floor(Math.random() * prizeValues.length);
                const prize = Math.floor(Math.random() * 10) + 1; // Actual prize between 1-10
                
                const segmentAngle = 360 / prizeValues.length;
                const extraRotation = 360 * (3 + Math.floor(Math.random() * 5)); // 3-7 full rotations
                const finalRotation = extraRotation + (360 - (randomPrizeIndex * segmentAngle) - (segmentAngle / 2));
                
                wheel.style.transform = `rotate(${finalRotation}deg)`;
                
                // After spin animation
                setTimeout(() => {
                    // Update spins
                    spinsToday++;
                    lastSpinDate = new Date();
                    localStorage.setItem('coinMasterSpins', spinsToday.toString());
                    localStorage.setItem('coinMasterSpinDate', lastSpinDate.toString());
                    
                    updateSpinsLeft();
                    
                    // Award prize
                    addCoins(prize);
                    
                    // Show result
                    earnedCoins.textContent = `+${prize} coins`;
                    resultModal.style.display = 'flex';
                    
                    // Close spinner modal
                    spinnerModal.style.display = 'none';
                }, 4000);
            });
            
            // Tap button
            tapBtn.addEventListener('click', function(e) {
                tapCount++;
                
                // Add coin every 2 taps
                if (tapCount % 2 === 0) {
                    coinsEarnedTapping++;
                    addCoins(1);
                    
                    // Show coin animation at tap position
                    showCoinAnimation(1, e.clientX, e.clientY);
                }
                
                tapCounter.textContent = `Taps: ${tapCount} | Coins earned: ${coinsEarnedTapping}`;
                
                // Animate button
                tapBtn.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    tapBtn.style.transform = 'scale(1)';
                }, 100);
            });
            
            // Close result modal
            closeResultBtn.addEventListener('click', function() {
                resultModal.style.display = 'none';
            });
            
            // Close modals when clicking outside
            document.addEventListener('click', function(e) {
                if (e.target === spinnerModal) spinnerModal.style.display = 'none';
                if (e.target === tapModal) tapModal.style.display = 'none';
                if (e.target === profileModal) profileModal.style.display = 'none';
                if (e.target === withdrawModal) withdrawModal.style.display = 'none';
                if (e.target === resultModal) resultModal.style.display = 'none';
            });
            
            // Initialize the app
            initApp();
        });
    </script>
</body>
</html>